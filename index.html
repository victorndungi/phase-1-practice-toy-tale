<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>Toy Tale</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <div id="toy-header">
      <img
        src="https://fontmeme.com/permalink/180719/67429e6afec53d21d64643101c43f029.png"
        alt="toy-header"
      />
    </div>

    <div class="container">
      <form class="add-toy-form">
        <h3>Create a toy!</h3>

        <input
          type="text"
          name="name"
          value=""
          placeholder="Enter a toy's name..."
          class="input-text"
        />
        <br />
        <input
          type="text"
          name="image"
          value=""
          placeholder="Enter a toy's image URL..."
          class="input-text"
        />
        <br />
        <input
          type="submit"
          name="submit"
          value="Create Toy"
          class="submit"
        />
      </form>
    </div>
    <p style="text-align:center">
      Andy needs your help! <button id="new-toy-btn">Add a new toy!</button>
    </p>

    <div id="toy-collection">
      <div class="card">
        <h2>Woody</h2>
        <img src="http://www.pngmart.com/files/3/Toy-Story-Woody-PNG-Photos.png" class="toy-avatar"/>
        <p>5 Likes</p>
        <button class="like-btn" id="[toy_id]">Like ❤️</button>
      </div>

      <div class="card">
        <h2>Buzz Lightyear</h2>
        <img src="http://www.pngmart.com/files/6/Buzz-Lightyear-PNG-Transparent-Picture.png" class="toy-avatar"/>
        <p>8 Likes</p>
        <button class="like-btn" id="[toy_id]">Like ❤️</button>
      </div>

      <div class="card">
        <h2>Mr.Potato head</h2>
        <img src="https://vignette.wikia.nocookie.net/universe-of-smash-bros-lawl/images/d/d8/Mr-potato-head-toy-story.gif/revision/latest?cb=20151129131217" class="toy-avatar"/>
        <p>3 Likes</p>
        <button class="like-btn" id="[toy_id]">Like ❤️</button>
      </div>
      <div class="card">
        <h2>Slinky Dog</h2>
        <img src="https://www.freeiconspng.com/uploads/slinky-png-transparent-1.png" class="toy-avatar"/>
        <p>4 Likes</p>
        <button class="like-btn" id="[toy_id]">Like ❤️</button>
      </div>

      <div class="card">
        <h2>Rex</h2>
        <img src="https://disney.fandom.com/wiki/Rex?file=Profile_-_Rex.jpeg" class="toy-avatar"/>
        <p>1 Likes</p>
        <button class="like-btn" id="[toy_id]">Like ❤️</button>
      </div>

      <div class="card">
        <h2>Bo Peep</h2>
        <img src="http://4.bp.blogspot.com/_OZHbJ8c71OM/Sog43CMFX2I/AAAAAAAADEs/0AKX0XslD4g/s400/bo.png" class="toy-avatar"/>
        <p>2 Likes</p>
        <button class="like-btn" id="[toy_id]">Like ❤️</button>
      </div>

      <div class="card">
        <h2>Hamm</h2>
        <img src="https://cdn140.picsart.com/244090226021212.png?r1024x1024" class="toy-avatar"/>
        <p>0 Likes</p>
        <button class="like-btn" id="[toy_id]">Like ❤️</button>
      </div>

      <div class="card">
        <h2>Little Green Men</h2>
        <img src="http://www.pngmart.com/files/3/Toy-Story-Alien-PNG-File.png" class="toy-avatar"/>
        <p>1 Likes</p>
        <button class="like-btn" id="[toy_id]">Like ❤️</button>
      </div>
    </div>
    <script>
     document.getElementById('toy-form').addEventListener('submit', function(event) {
      event.preventDefault();
      
      const toyName = document.getElementById('name').value;
      const toyImage = document.getElementById('image').value;
      
      const newToy = {
        name: toyName,
        image: toyImage,
        likes: 0
      };
      
      fetch('http://localhost:3000/toys', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Accept': 'application/json'
        },
        body: JSON.stringify(newToy)
      })
      .then(response => response.json())
      .then(toy => {
        // Add the new toy to the DOM
        const toyCollection = document.getElementById('toy-collection');
        const toyDiv = document.createElement('div');
        toyDiv.innerHTML = `
          <h2>${toy.name}</h2>
          <img src="${toy.image}" alt="${toy.name}">
          <p>${toy.likes} Likes</p>
        `;
        toyCollection.appendChild(toyDiv);
        
        // Clear the form
        document.getElementById('toy-form').reset();
      })
      .catch(error => {
        console.error('Error:', error);
      });
    });
    </script>
    <script type="text/javascript" src="src/index.js"></script>
  </body>
</html>
